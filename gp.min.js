!function(){"use strict";let tooltipTimeOut,gp=new GamePlan;gp.milestone=!0,null===localStorage.getItem("darkMode")&&localStorage.setItem("darkMode",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");function init(){document.getElementById("time").innerHTML=gp.currentLevels(["time"]).time.text,document.getElementById("tasks").innerHTML=gp.currentLevels(["task"]).task.text,document.getElementById("goalTasksPerHour").innerHTML=Math.round(100*gp.tasksPerHour)/100+"tasks/h",document.getElementById("goalTimePerHour").innerHTML=Math.round(100*gp.minutesPerHour)/100+"m/h",gp.milestones().forEach(((el,i)=>{document.getElementById("sidePanel").children[i+1].innerHTML=el})),gp.updateTime()}function setDarkMode(){document.getElementsByTagName("body")[0].dataset.colorscheme="light"===document.getElementsByTagName("body")[0].dataset.colorscheme?"dark":"light",localStorage.setItem("darkMode",document.getElementsByTagName("body")[0].dataset.colorscheme)}["startTime","endTime","lunchTime","lunchDuration","goalTime","goalTasks"].forEach((el=>{let element=document.getElementById(el);element.value=gp[el],element.addEventListener("change",(ev=>{gp[el]=element.value,init()}))})),window.addEventListener("gp-update-task",(ev=>{document.getElementById("tasks").innerHTML=ev.detail.text,gp.lunchTimeAsDate<=new Date&&new Date(gp.lunchTimeAsDate.getTime()+6e4*gp.lunchDuration)>=new Date?document.getElementById("lunch").style.display="block":document.getElementById("lunch").style.display="none"})),window.addEventListener("gp-update-time",(ev=>{document.getElementById("time").innerHTML=ev.detail.text})),window.addEventListener("gp-update-milestone",(ev=>{gp.milestones().forEach(((el,i)=>{document.getElementById("sidePanel").children[i+1].innerHTML=el}))})),document.getElementById("darkModeCheck").addEventListener("change",(ev=>{setDarkMode()})),document.getElementById("darkModeCheck").checked="light"!==localStorage.getItem("darkMode"),document.getElementsByTagName("body")[0].dataset.colorscheme=localStorage.getItem("darkMode");let darkModeIcon=document.querySelector(".icon-darkMode");["click","keydown"].forEach((el=>{darkModeIcon.addEventListener(el,(ev=>{["Shift","Tab"].includes(ev.key)||(setDarkMode(),document.getElementById("darkModeCheck").checked="light"!==localStorage.getItem("darkMode"))}))}));let body=document.getElementsByTagName("body")[0];["click","keydown"].forEach((el=>{body.addEventListener("click",(ev=>{document.getElementById("settingsMenu").style.display="none"}))})),document.getElementById("settingsMenu").addEventListener("click",(ev=>{ev.stopPropagation()}));let settingsIcon=document.querySelector(".icon-settings");["click","keydown"].forEach((el=>{settingsIcon.addEventListener(el,(ev=>{["Shift","Tab"].includes(ev.key)||(ev.stopPropagation(),document.getElementById("settingsMenu").style.display="block"===document.getElementById("settingsMenu").style.display?"none":"block",Array.from(document.getElementsByClassName("tooltip")).forEach((tt=>{tt.style.display="none"})))}))})),document.getElementById("milestoneCheck").addEventListener("change",(ev=>{localStorage.setItem("milestone",!0===ev.target.checked?"true":"false"),document.getElementById("sidePanel").style.display="false"===localStorage.getItem("milestone")?"none":"block"})),document.getElementById("milestoneCheck").checked="true"===localStorage.getItem("milestone"),document.getElementById("milestoneCheck").dispatchEvent(new Event("change")),document.getElementById("perHourCheck").addEventListener("change",(ev=>{localStorage.setItem("perHourCheck",!0===ev.target.checked?"true":"false"),Array.from(document.getElementsByClassName("perHour")).forEach((el=>{el.style.display="false"===localStorage.getItem("perHourCheck")?"none":"block"}))})),document.getElementById("perHourCheck").checked="true"===localStorage.getItem("perHourCheck"),document.getElementById("perHourCheck").dispatchEvent(new Event("change")),document.querySelectorAll(".icon").forEach((el=>{el.addEventListener("mouseover",(ev=>{"block"!==document.getElementById("settingsMenu").style.display&&(tooltipTimeOut=setTimeout((()=>{el.parentElement.lastElementChild.style.display="block"}),500))})),el.addEventListener("mouseout",(ev=>{ev.stopPropagation(),clearTimeout(tooltipTimeOut),el.parentElement.lastElementChild.style.display="none"}))})),document.getElementById("updated").innerHTML=" "+document.lastModified,init()}();